## 一、概述

数组，即集合，所谓集合，就是存储数据的容器。我们可以把教室理解为一个集合，而学生作为存储在集合里面的数据，叫做元素。

JavaScript集合类型主要使用数组，数组为一个特殊对象。ES6新增了Set数据结构，也用于表示一个集合。下面将主要介绍数组相关的知识点。

数组是**有序排列**的一组值的集合，这些值被包含在一对**方括号内**，里面的这些值称作**数组元素**。每个数组内的值都会有一个键名，这些键名其实就是一个从0开始依次计 数的下标，每个数组都会有一个“**length**”属性，表示数组元素的个数，所以数组内元素最大的下标值为**“length - 1”**。

数组内的值可以是JavaScript允许的任何类型的值，甚至可以是数组自身，像这样数组内包含另外一个数组的数组被称作二维数组，二维数组任然继续包含数组，这样的数组就会形成“多维数组”。数组的基本表现形式如下：

```javascript
var arr = [1, "a", {}, [], false];
```

> 提示：数组虽然有很多独立的特性，但它的数据类型仍然为对象型（object）。



## 二、创建数组 

```javascript
// 1、字面量方法(优先使用)
var arr1 = [1, 2, 3];

// 2、对象构造方法
var arr2 = new Array(1, 2, 3);

// 3、数组也可以先声明后赋值
var arr3 = [];
arr3[0] = "Petter";
arr3[1] = "Tom";
arr3[3] = "Lily"
// ["Petter", "Tom", empty x 1, "Lily"]

var arr4 = new Array();
arr4[0] = "Petter";
arr4[1] = "Tom";
arr4[3] = "Lily"
// ["Petter", "Tom", empty x 1, "Lily"]
```

[^ tips]: 数组的空元素empty表示空位, 它不是一种数据类型，undefined是一种数据类型, 在数组中表示这个位置的值未定义。



## 三、访问 & 修改数组元素

- 访问：`数组名[下标]`
- 修改：`数组名[下标] = 新值`

```javascript
var names = ["达摩", "张良", "吕布"];

// 1. 访问数组元素
names[0]; // "达摩"

// 2. 修改数组元素
names[1] = "貂蝉"; // ["达摩", "貂蝉", "吕布"]
```



## 四、数组空位

`in` 运算符用于检测数组元素的 **某个位置** 是否存在元素，返回的是一个布尔值。如果为 `false`，则表示对应下标位置的值不存，反之亦然。

```javascript
var names = ["达摩", , "貂蝉", "吕布"];

var heros = ["达摩", empty, "貂蝉", "吕布"];

0 in heros;
true
1 in heros;
false
2 in heros;
true
heros[1];
undefined
```

需要在这里进行补充说明的是，上例中下标为1的地方没有值，称作“**空位**（hole）”，它 **返回的值** 为 `undefined`，但仍然会被计入数组的长度属性 `length` 中。而length的值是由数组中最后一个元素的下标+1决定的，我们来看一个示例：

```javascript
var heros = ["达摩", "貂蝉", "吕布"];
console.log(heros.length)	// 3
heros[4] = "李白"
console.log(heros.length)	// 5
console.log(heros)			// ["达摩", "貂蝉", "吕布", empty, "李白"]
console.log(heros[3])		// undefined
```



## 五、数组对象

### 5.1 长度

通过 `length` 属性访问数组元素长度

```javascript
var heros = ["达摩", "貂蝉", "吕布"];
heros.length
3
```



### 5.2 数组判断

判断某个对象是否是一个数组使用 `Array.isArray()` 方法，如果是，则返回 `true`，否则返回 `false`。

```javascript
Array.isArray("");
false
Array.isArray({});
false
Array.isArray(true);
false
Array.isArray([]);
true
```



### 5.3 添加元素

添加数组元素的方法比较多，主要有以下种：

- `数组名[下标]`：通过下标添加元素，效率高，建议使用。*（改变原始数组）*

- `push()`：在数组的末端添加一个或多个元素，并返回添加新元素后的数组长度*（ 改变原数组）*。
- `unshift()`：在数组的开始位置添加一个或多个元素，并返回添加新元素后的数组长度*（ 改变原数组）*。

```javascript
var heros = ["达摩", "貂蝉", "吕布"];
// 1. 数组名[下标]，只能在末尾添加
heros[heros.length] = "露娜";
heros
(4) ["达摩", "貂蝉", "吕布", "露娜"]

// 2. push()
heros.push("上官婉儿", "嬴政");
heros
(6) ["达摩", "貂蝉", "吕布", "露娜", "上官婉儿", "嬴政"]

// 3. unshift()
heros.unshift("李白");
7
heros
(7) ["李白", "达摩", "貂蝉", "吕布", "露娜", "上官婉儿", "嬴政"]
```



### 5.4 合并数组

- `apply()`：合并数组（只能合并两个）*（ 改变原数组）*

- `concat()`：合并数组（允许合并多个数组） *（ 不改变原数组）*

- `[...[]]`：ES6 序列化合并数组，高效简洁，建议使用。

  ```javascript
  var a = ["李白"];
  var b = ["王昭君", "虞姬"];
  
  // 1. apply
  Array.prototype.push.apply(a, b);
  a
  (3) ["李白", "王昭君", "虞姬"]
  b
  (2) ["王昭君", "虞姬"]
  
  // 2. concat
  var arr = a.concat(b);
  arr
  (3) ["李白", "王昭君", "虞姬"]
  
  // 3. [...[]]
  var arr = [...a, ...b];
  arr
  (3) ["李白", "王昭君", "虞姬"]
  ```

  

### 5.5 删除元素

删除数组元素的方法如下：

- `pop()`：删除数组最后一个元素*（ 改变原数组）*。

- `shift()`：删除数组第一个元素*（ 改变原数组）*。

- `splice()`：范围删除*（ 改变原数组）*。

  ```javascript
  var heros = ["露娜", "上官婉儿", "李白", "嬴政", "貂蝉", "兰陵王", "亚瑟"];
  // 1. pop
  heros.pop();
  heros
  (6) ["露娜", "上官婉儿", "李白", "嬴政", "貂蝉", "兰陵王"]
  
  // 2. shift 
  heros.shift();
  heros
  (5) ["上官婉儿", "李白", "嬴政", "貂蝉", "兰陵王"]
  ```

  [^ 提示]: 以上两种方法在删除数组元素时只能一个一个删除

删除数组元素中 *splice* 方法最为灵活，不仅可以范围删除数组元素，还可以实现数组元素的插入和替换。该方法语法形式为：

```javascript
splice(location, count, items...)
```

参数解读：

- `location`：删除的起始位置
- `count`：删除的元素个数
- `items`：要被插入数组的新元素。

```javascript
// 1. 删除 -> 删除李白、嬴政
heros.splice(1, 2);
heros
(3) ["上官婉儿", "貂蝉", "兰陵王"]

// 2. 替换 -> 把兰陵王替换成鲁班七号
heros.splice(2, 1, "鲁班七号");
heros
(3) ["上官婉儿", "貂蝉", "鲁班七号"]

// 3. 插入 -> 在鲁班七号之前插入吕布、赵云
heros.splice(2, 0, "吕布", "赵云");
heros
(5) ["上官婉儿", "貂蝉", "吕布", "赵云", "鲁班七号"]
```

另外，该方法的第一个参数可以为负数（但是第二个不能，因为它表示长度），表示从数组末端开始计数，开始计数的值为“**-1**”。

```javascript
heros.splice(-1, 1);
heros
(4) ["上官婉儿", "貂蝉", "吕布", "赵云"]
```

如果只有第一个参数，则表示从指定位置删除到末尾：

```javascript
heros.splice(1);
heros
["上官婉儿"]
```

[^ tips]: 到目前位置，我们已经学了 `split`、`slice`、`splice` 三个方法，这三个方法特别容易混淆，所以一定要注意区分。

### *** 容易混淆的(split、slice、splice)

split() 方法用于把一个 **字符串** 分割成 **字符串数组** 。

slice() 方法用于 **字符串、数组 截取**

splice() 方法用于 **数组范围删除**



### 5.6 截取元素

截取数组元素与字符串截取类似，使用 `slice` 方法，该方法语法形式如下：

```javascript
arr.slice(startIdx, endIdx);
```

语法解读：

- `startIdx`：起始位置（从下标0开始）
- `endIdx`：结束位置，不包括结束位置的元素，如果省略该参数，则表示从头截取到末尾。

```javascript
var heros = ["上官婉儿", "李白", "嬴政", "貂蝉", "兰陵王"];
var res = heros.slice(1, 4);
res
(3) ["李白", "嬴政", "貂蝉"]

var res = heros.slice(1);
res
(4) ["李白", "嬴政", "貂蝉", "兰陵王"]
```

除此之外，该方法还可以利用原型链中的 `call()` 方法将一个类似数组转化成真正的数组，其语法形式为：

```javascript
Array.prototype.slice.call(obj);
```

代码示例：

```html
<ul class="list">
    <li>LIST-1</li>
    <li>LIST-2</li>
    <li>LIST-3</li>
    <li>LIST-4</li>
    <li>LIST-5</li>
</ul>
```

```javascript
// 1. 获取所有的.list下li标签
var lis = document.querySelectorAll(".list li");
console.log(lis);
/*
NodeList(5) [li, li, li, li, li]
0: li
1: li
2: li
3: li
4: li
length: 5
__proto__: NodeList
*/
// 2. 企图在lis对象上调用push方法
// lis.push("<li></li>");

// 3. 程序会报错，因为lis本质上不是数组而是NodeList对象
// Uncaught TypeError: lis.push is not a function

// 4. 如果想要调用push方法添加内容，需将类似数组转为真正的数组
lis = Array.prototype.slice.call(lis);
console.log(lis);
/*
(5) [li, li, li, li, li]
0: li
1: li
2: li
3: li
4: li
length: 5
__proto__: Array(0)
*/
// 5. lis已经被转换成真正的数组，所以可以调用push方法了
lis.push("<li></li>");
console.log(lis);
```

将一个类似数组转换为真正的数组的意义在于，类似数组不具有数组的方法，直接对一个类似数组使用数组的方法浏览器会报错，而很多时候我们的操作只有通过使用数组的方法才能完成，或用数组的方法完成才是最佳的选择。



### 5.7 数组排序

在数组中排序使用 `sort()` 方法。

```javascript
var fruits = ["Banana", "Orange", "Apple", "Mango"];
fruits.sort();
console.log(fruits)	// ["Apple", "Banana", "Mango", "Orange"]
```

排序顺序可以是字母或数字，并按升序或降序。

默认排序顺序为按字母升序。



[^ 注意]: 当数字是按字母顺序排列时"40"将排在"5"前面。因为比较的是40中的4和5。

使用数字排序，你必须通过一个函数作为参数来调用。

函数指定数字是按照升序还是降序排列。

```javascript
var points = [40, 100, 1, 5, 25, 10];
points.sort(function (a, b) { return a - b });
console.log(points)	// [1, 5, 10, 25, 40, 100]
```



**更多详情如下：**

#### a. 数字排序